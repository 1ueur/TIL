리버스 엔지니어링에서는 소프트웨어 분석에 있어 사용하는 분석 방법들을 크게 **정적 분석(Static Analysis)** 과 **동적 분석(Dynamic Analysis)** 로 구분합니다.

## 정적 분석
**정적 분석(Static Analysis)** 은 프로그램을 실행시키지 않고 분석하는 방법입니다.

### 장점❗️
**1. 프로그램의 전체 구조를 파악하기 쉽다.**
- 프로그램이 어떤 함수로 구성되었는지, 함수들이 서로 어떤 호출 관계를 갖는지, 어떤 API를 사용하고 어떤 문자열을 포함하는지 등을 종합적으로 살펴볼 수 있습니다.

**2. 분석 환경의 제약에서 비교적 자유롭다.**
- 실행을 전제로 하는 동적 분석은 프로그램 오픈에 있어 별도의 SW가 필요한 경우가 있는데, 정적 분석은 프로그램을 실행하지 않아도 분석을 지원하는 적절한 도구만 갖춘다면 가능합니다.

**3. 바이러스와 같은 악성 프로그램의 위협으로부터 안전하다.**
- 바이러스를 동적 분석으로 분석하고자 하면 바이러스를 실제로 실행시켜야 하므로 컴퓨터가 감염될 위험이 높습니다. 

### 단점❗️
**1. 프로그램에 난독화(Obfuscation)가 적용되면 분석이 매우 어렵다.**
- 최근 대다수의 개발자들은 리버스 엔지니어링으로부터 보호하기 위해 프로그램에 난독화 기법을 적용합니다. **난독화 기법**으로 인해 코드가 심하게 변형되어 이를 파악하기가 어려워집니다.

**2. 다양한 동적 요소를 고려하기 어렵다.**
- 프로그램은 여러 함수로 구성되어 있습니다. 복잡한 코드일수록 어떤 함수가 특정 시점에 정확히 어떤 인자와 어떤 전역 변수를 가지고 실행될지 정적 분석으로는 알기가 어렵습니다.

<br/>

```IDA```는 대표적인 정적 분석 도구입니다. 기계어를 사람이 이해하기 쉬운 언어로 나타내어 분석을 쉽게 도와주는 **디컴파일(Decompile) 코드**와 **상호 참조(Cross Reference) 기능**, **제어 흐름 그래프(Control Flow Graph)** 등을 통해 쉽게 분석할 수 있도록 도와줍니다.

<br/>

## 동적 분석 
**동적 분석(Dynamic Analysis)** 은 프로그램을 실행시키면서 분석하는 방법입니다.

### 장점❗️
**1. 코드를 자세히 분석해보지 않고도 프로그램의 개략적인 동작을 파악할 수 있다.**
- 많은 프로그램은 각각의 함수들이 복잡하게 얽혀있기 때문에 정적 분석으로 완전히 이해하기에는 매우 어렵습니다. 하지만 동적 분석으로 프로그램을 직접 실행시키면 어떤 입력에 따라 출력 결과를 빠르게 확인해볼 수 있고, 이 출력값을 기반으로 동작을 추론할 수 있습니다.

### 단점❗️
**1. 분석 환경을 구축하기 어렵다.**
- 동적 분석은 프로그램을 실행하지 못하면 분석을 할 수 없습니다. 그래서 호스트 컴퓨터와 다른 환경의 프로그램을 분석하고자 할 때는 가상 머신을 구축하거나 필요한 장치를 구매하여야 합니다.

**2. 동적 분석을 어렵게 하는 안티 디버깅(Anti Debugging).**
- 동적 분석의 일종인 디버깅을 방해하는 **안티 디버깅**은 자신이 디버깅 당하고 있는지 검사하고, 디버깅 중이면 프로그램을 강제로 종료시킬 수 있습니다. 간단한 예제입니다.
```cpp
if (is_debugging())
    exit(-1);
Func();
```

<br/>

Windows용 대표적인 동적 분석 도구로는 디버거 중 하나인 ```x64dbg```가 있습니다.
디버거는 프로그램의 버그를 찾아내고 제거하기 위해 사용되는 도구입니다. 실행 중인 **어셈블리 코드**, **CPU의 레지스터(Register) 상태**, **메모리(Memory)** 와 **스택(Stack) 값**을 확인하며 분석을 진행합니다.
[Hello World.cpp 동적 분석 예제](https://github.com/princesssuna/TIL/blob/main/Reversing/Reversing%20핵심%20원리/Hello%20World!%20리버싱.md)



